# Template Angular app

This repository contains a preconfigured Angular application template used within the `dnd-mapp` organization. It provides:

- A modern Angular setup (Angular 21)
- Preconfigured tooling (ESLint, Prettier, Stylelint, Vitest, Playwright, etc.)
- A clean starting point for building new Angular applications

> [!IMPORTANT]
> This repository is provided for viewing only. It is not licensed for reuse. See [License](#license) for details.

---

## Getting started

> [!NOTE]
> This template is primarily intended for use within the `dnd-mapp` organization.

### Prerequisites

You will need:

- **Node.js, v24.12.0**
- **pnpm, v10.26.2**
- **[mkcert](https://github.com/FiloSottile/mkcert)** (for local HTTPS certificates)
- (Recommended) [**Mise**](https://mise.jdx.dev/) to manage Node and pnpm versions

Ensure `node`, `pnpm`, and `mkcert` are available in your `PATH`.

### Installation

Install dependencies with pnpm:

```bash
pnpm install
```

### Local HTTPS configuration

The dev server is configured to serve over **HTTPS by default**. To avoid browser certificate warnings, you need to:

1. Install the local Certificate Authority (CA) provided by `mkcert`.
2. Generate self-signed certificates for the local domain.
3. Make sure your `hosts` file maps the custom domain to `localhost`.

#### 1. Install mkcert

Follow the instructions for your OS:

- **Windows**
    - Install [Chocolatey](https://chocolatey.org/install) (if not already installed).
    - Then:

      ```bash
      choco install mkcert
      ```

- **macOS**
    - Install [Homebrew](https://brew.sh/) (if not already installed).
    - Then:

      ```bash
      brew install mkcert nss
      ```

  `nss` is required if you use Firefox.

- **Linux**
    - Use your distribution’s package manager or download from mkcert’s releases.  
      Examples:

      ```bash
      # Ubuntu / Debian (using Homebrew on Linux)
      brew install mkcert nss
      ```

For detailed and up-to-date installation steps, see the [mkcert documentation](https://github.com/FiloSottile/mkcert?tab=readme-ov-file#installation).

#### 2. Install the local CA into your trust store

This step allows your system/browser to trust certificates generated by mkcert.

Run:

```bash
mkcert -install
```

- On **Windows**, this installs a local CA into the Windows certificate store.
- On **macOS**, it installs the CA into the macOS Keychain and (if `nss` is installed) into Firefox’s store.
- On **Linux**, it attempts to integrate with your system’s trust store and browsers (this may vary per distro and desktop environment).

After this step, certificates generated by `mkcert` will be trusted by your system and browsers.

#### 3. Generate local certificates

This project provides a script to generate the required certificates:

```bash
pnpm gen:certificates
```

This will typically:

- Create a local key and certificate for the development domain used by the dev server.
- Place them in the location expected by the dev setup.

If the script fails, or you need to regenerate manually, you can use:

```bash
mkcert -cert-file cert.pem -key-file cert-key.pem localhost.template-angular-app.dndmapp.dev localhost 127.0.0.1
```

and then adjust the dev server config accordingly.

#### 4. Update your hosts file

The dev server is configured to use a custom local domain:

```text
localhost.template-angular-app.dndmapp.dev
```

You need to map this domain to `127.0.0.1` in your system’s hosts file.

- **Windows**  
  Edit `C:\Windows\System32\drivers\etc\hosts` as Administrator and add:

  ```text
  127.0.0.1  localhost.template-angular-app.dndmapp.dev
  ```

- **macOS / Linux**  
  Edit `/etc/hosts` with sudo and add:

  ```text
  127.0.0.1  localhost.template-angular-app.dndmapp.dev
  ```

After saving, your browser should resolve `https://localhost.template-angular-app.dndmapp.dev` to your local dev server without certificate warnings (once the CA and certificates are set up).

---

### Running the dev server

Start the dev server with:

```bash
pnpm start
```

Then open the configured HTTPS URL in your browser, for example:

```text
https://localhost.template-angular-app.dndmapp.dev:4200
```

---

### Running tests

This project uses **Vitest** and **Playwright**. Tests require the Playwright browsers to be installed.

#### 1. Install Playwright browsers

Run once (or whenever you update Playwright):

```bash
pnpm playwright:install-browsers
```

#### 2. Run tests

- Run tests **once**:

  ```bash
  pnpm test
  ```

- Run tests in **watch / dev mode**:

  ```bash
  pnpm test:dev
  ```

Refer to the scripts section of `package.json` or the contributing guide for any additional test-related commands.

---

## Tooling overview

This template is preconfigured with:

- **Framework**
    - Angular (version 21)

- **Package manager**
    - `pnpm` (version 10)

- **Linting & formatting**
    - ESLint
    - Prettier
    - Stylelint

- **Testing**
    - Vitest
    - Playwright (for running tests in a real browser environment)

- **Other**
    - `@analogjs`
    - [Mise](https://mise.jdx.dev/) is recommended to keep Node and pnpm versions aligned

See [CONTRIBUTING.md](./CONTRIBUTING.md) for details on running linting and formatting checks locally.

---

## Editor setup

To get fast feedback and consistent formatting, it is recommended to configure your editor to use the project’s Prettier, ESLint, and (where possible) Stylelint settings.

### WebStorm / IntelliJ IDEA

These instructions apply to JetBrains IDEs with the JavaScript/TypeScript tooling (WebStorm, IntelliJ IDEA Ultimate, etc.).

#### Use project Prettier

1. Open **Settings / Preferences**:
    - Windows/Linux: `File > Settings`
    - macOS: `WebStorm > Preferences`
2. Go to **Languages & Frameworks > JavaScript > Prettier**.
3. Set **Prettier package** to the project’s local installation:
    - Choose `./node_modules/prettier` (auto-detected in most cases).
4. Enable:
    - **On code reformat** (`⌘⌥L` / `Ctrl+Alt+L`)
    - **On save** (if available in your version).

#### Use project ESLint

1. Open **Settings / Preferences**.
2. Go to **Languages & Frameworks > JavaScript > Code Quality Tools > ESLint**.
3. Select:
    - **Automatic ESLint configuration** (recommended), or
    - **Manual ESLint configuration** using:
        - **ESLint package**: `./node_modules/eslint`
4. Enable:
    - **Run eslint --fix on save** (if available).

#### Use project Stylelint

1. Install the **Stylelint** plugin if it’s not already installed:
    - **Settings / Preferences > Plugins > Marketplace**, search for “Stylelint”
      and install.
2. Go to **Languages & Frameworks > Style Sheets > Stylelint**.
3. Enable Stylelint and point it to:
    - **stylelint package**: `./node_modules/stylelint`
4. Optionally enable **Run on save** or on file changes, depending on your IDE version.

---

### Visual Studio Code

The project comes configured with a couple of recommended extensions. See the extensions [config](./.vscode/extensions.json) for more details.

#### Recommended workspace settings

The project also includes a recommended workspace [config](./.vscode/settings.json). You may adjust it to your liking, but please don't push those changes.

Notes:

- VS Code will automatically use the project-local `prettier`, `eslint`, and `stylelint` binaries from `node_modules` when available.
- If you see conflicts between ESLint and Prettier about formatting rules, ensure that Prettier is the only **default formatter** and ESLint is used for linting/fixing (not for formatting).

---

## Docker image

This Angular app is also containerized with Docker.

- A dedicated README with Docker-specific instructions (build, configuration, environment variables, and usage) is available at: **[.docker/README.md](./.docker/README.md)**.
- The same content (or a subset of it) is also used as the description on the project’s Docker Hub page for the published image.

If you plan to run this template via Docker rather than directly with Node and pnpm, please read [.docker/README.md](./.docker/README.md).

---

## Contributing

Contributions to `dnd-mapp/template-angular-app` are welcome.

Please read the [Contributing guide](./CONTRIBUTING.md) for details on how to report issues, propose changes, and submit pull requests. By participating in this project, you also agree to follow our [Code of Conduct](./CODE_OF_CONDUCT.md).

---

## Code of Conduct

This project follows a Code of Conduct to help create a welcoming and productive environment for everyone.

By participating in this repository (creating issues, submitting pull requests, commenting, or any other form of contribution), you agree to uphold this Code of Conduct.

Please read the full [Code of Conduct](./CODE_OF_CONDUCT.md) before contributing.

---

## Status

This template is primarily maintained for internal use within the `dnd-mapp` organization. External contributions are welcome, but the project roadmap and design decisions are primarily driven by internal needs.

---

## License

This project is **not licensed for reuse**.

- The author reserves all rights.
- The code is published on GitHub for transparency and personal reference only.
- You are **not permitted** to use, copy, modify, or distribute this code in any form, whether for commercial or non-commercial purposes, without prior written permission from the author.

For more info see the [LICENSE](./LICENSE). For permission requests, contact: [mail.dndmapp@gmail.com](mailto:mail.dndmapp@gmail.com)
